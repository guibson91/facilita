{"version":3,"sources":["webpack:///./src/app/mobile/pages/phone-edit/phone-edit.module.ts","webpack:///./src/app/mobile/pages/phone-edit/phone-edit.page.html","webpack:///./src/app/mobile/pages/phone-edit/phone-edit.page.scss","webpack:///./src/app/mobile/pages/phone-edit/phone-edit.page.ts"],"names":[],"mappings":"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","file":"default~mobile-pages-customer-customer-module~mobile-pages-phone-edit-phone-edit-module~mobile-pages~e188e834.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PhoneEditPage } from './phone-edit.page';\r\nimport { GlobalComponentsModule } from '../../../components/global-components.module';\r\nimport { MobileComponentsModule } from '../../components/mobile-components.module';\r\nimport { PipesModule } from '../../../pipes/pipes.module';\r\n\r\nimport { BrMaskerModule } from 'br-mask';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    //Custom Modules\r\n    GlobalComponentsModule,\r\n    MobileComponentsModule,\r\n    PipesModule,\r\n    BrMaskerModule,\r\n    ReactiveFormsModule,\r\n\r\n    //Default Modules\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule\r\n  ],\r\n  declarations: [PhoneEditPage],\r\n  entryComponents: [PhoneEditPage]\r\n})\r\nexport class PhoneEditPageModule { }\r\n","module.exports = \"<ion-header class=\\\"app\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\" left color=\\\"light\\\">\\r\\n      <ion-button icon-only (click)=\\\"dismiss()\\\" color=\\\"light\\\">\\r\\n        <ion-icon name=\\\"ios-arrow-back\\\" color=\\\"light\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"title-default\\\">\\r\\n      <h3 ion-text class=\\\"my-font-logo\\\" no-margin>TELEFONE</h3>\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div>\\r\\n    <ion-item color=\\\"transparent\\\" no-lines>\\r\\n      <h5 ion-text text-center color=\\\"medium\\\" text-wrap class=\\\"text-description\\\">\\r\\n        Para realizar um pedido você deve informar um Telefone válido, isso garante maior segurança e eficácia tanto para o estabelecimento\\r\\n        quanto para você\\r\\n      </h5>\\r\\n    </ion-item>\\r\\n    <form [formGroup]=\\\"form\\\">\\r\\n      <ion-item class=\\\"input-small input-phone shadow shadow-light\\\" tappable>\\r\\n        <ion-label position=\\\"stacked\\\" color=\\\"primary\\\"> Telefone </ion-label>\\r\\n        <ion-input type=\\\"tel\\\" formControlName=\\\"phone\\\" maxlength=\\\"15\\\" name=\\\"phone\\\" [brmasker]=\\\"{form: form.get('phone'), phone: true}\\\"></ion-input>\\r\\n      </ion-item>\\r\\n    </form>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer no-margin no-padding>\\r\\n  <ion-button no-margin no-padding size=\\\"large\\\" expand=\\\"block\\\" text-center type=\\\"submit\\\" [disabled]=\\\"!form.get('phone').value || !isNewPhone\\\" color=\\\"primary\\\"\\r\\n    (click)=\\\"registerPhone()\\\">\\r\\n    Salvar\\r\\n  </ion-button>\\r\\n</ion-footer>\"","module.exports = \".input-phone {\\n  padding-right: 16px;\\n  padding-bottom: 16px;\\n  background: white;\\n  --background: white; }\\n\\n.text-description {\\n  color: var(--ion-color-medium-shade); }\\n\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { User } from '../../../../models/user';\r\nimport { Platform, NavParams, LoadingController, AlertController, ModalController } from '@ionic/angular';\r\nimport { SystemService } from '../../../services/system.service';\r\nimport { SharedService } from '../../../services/shared.service';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-phone-edit',\r\n  templateUrl: './phone-edit.page.html',\r\n  styleUrls: ['./phone-edit.page.scss'],\r\n})\r\nexport class PhoneEditPage implements OnInit {\r\n\r\n  error: {\r\n    code: number,\r\n    title: string,\r\n    message: string\r\n  };\r\n\r\n  @Input()\r\n  user: User;\r\n\r\n  form: FormGroup;\r\n\r\n  constructor(\r\n    public platform: Platform,\r\n    public navParams: NavParams,\r\n    private system: SystemService,\r\n    private shared: SharedService,\r\n    public loadingCtrl: LoadingController,\r\n    public modalCtrl: ModalController,\r\n    public alertCtrl: AlertController) { }\r\n\r\n  ngOnInit() {\r\n    this.system.setScreenName(\"PhoneEditPage\")\r\n    this.form = new FormGroup({\r\n      phone: new FormControl(this.shared.user.phone || '', Validators.required),\r\n    });\r\n  }\r\n\r\n  async showWarning() {\r\n    let alert = await this.alertCtrl.create({\r\n      header: 'Ops!',\r\n      subHeader: 'Você precisa digitar um telefone válido',\r\n      buttons: ['OK']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  dismiss() {\r\n    this.modalCtrl.dismiss({ phone: '' });\r\n  }\r\n\r\n  async help() {\r\n    const alert = await this.alertCtrl.create({\r\n      header: 'Ajuda',\r\n      message: 'Com o número do telefone aumenta a chance de eficácia de entrega.',\r\n      buttons: [{ role: 'cancel', text: 'ok' }]\r\n    })\r\n    alert.present()\r\n  }\r\n\r\n  /**\r\n   * Voltar página sem salvar alterações\r\n   */\r\n  cancel() {\r\n    this.dismiss();\r\n  }\r\n\r\n  /**\r\n   * Salvar alterações e redirecionar para página anterior\r\n   */\r\n\r\n  get isNewPhone() {\r\n    if (this.shared.user.phone == this.form.value.phone) {\r\n      return false\r\n    } else {\r\n      return true\r\n    }\r\n\r\n  }\r\n\r\n  async registerPhone() {\r\n\r\n    if (this.form.value.phone.length < 14) {\r\n      this.showWarning();\r\n    } else {\r\n\r\n      let loading = await this.loadingCtrl.create({});\r\n      loading.present();\r\n      User.update(this.shared.user.id, { phone: this.form.value.phone }).subscribe(() => {\r\n        loading.dismiss();\r\n        this.modalCtrl.dismiss({ phone: this.form.value.phone });\r\n        this.system.logEvent(\"save_phone\")\r\n      }, error => {\r\n        loading.dismiss();\r\n        this.system.showErrorAlert(error);\r\n      });\r\n    }\r\n  }\r\n\r\n}"],"sourceRoot":""}