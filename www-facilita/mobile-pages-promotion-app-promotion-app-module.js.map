{"version":3,"sources":["webpack:///./src/app/mobile/pages/promotion-app/promotion-app.module.ts","webpack:///./src/app/mobile/pages/promotion-app/promotion-app.page.html","webpack:///./src/app/mobile/pages/promotion-app/promotion-app.page.scss","webpack:///./src/app/mobile/pages/promotion-app/promotion-app.page.ts","webpack:///./src/app/mobile/pages/promotion-filter-app/promotion-filter-app.module.ts","webpack:///./src/app/mobile/pages/promotion-filter-app/promotion-filter-app.page.html","webpack:///./src/app/mobile/pages/promotion-filter-app/promotion-filter-app.page.scss","webpack:///./src/app/mobile/pages/promotion-filter-app/promotion-filter-app.page.ts"],"names":[],"mappings":"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","file":"mobile-pages-promotion-app-promotion-app-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PromotionAppPage } from './promotion-app.page';\r\nimport { PromotionFilterAppPageModule } from '../promotion-filter-app/promotion-filter-app.module';\r\nimport { PipesModule } from '../../../pipes/pipes.module';\r\nimport { PromotionDetailAppPageModule } from '../promotion-detail-app/promotion-detail-app.module';\r\nimport { MobileComponentsModule } from '../../components/mobile-components.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PromotionAppPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PipesModule,\r\n    PromotionFilterAppPageModule,\r\n    PromotionDetailAppPageModule,\r\n    MobileComponentsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [PromotionAppPage]\r\n})\r\nexport class PromotionAppPageModule { }\r\n","module.exports = \"<ion-header no-border class=\\\"app\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\" hideBackButton=\\\"true\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"dismiss()\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"ios-arrow-back\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"title-default\\\">\\r\\n      <h3 ion-text class=\\\"my-font-logo\\\" no-margin>PROMOÇÕES</h3>\\r\\n    </ion-title>\\r\\n    <!-- <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"openFilter()\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"menu\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons> -->\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <div *ngIf=\\\"loading\\\">\\r\\n    <section margin-top class=\\\"placeholder\\\" *ngFor=\\\"let f of [1, 2, 3, 4]\\\">\\r\\n      <aside class=\\\"shadow shadow-3\\\">\\r\\n        <div class=\\\"placeholder-animation image\\\"></div>\\r\\n      </aside>\\r\\n      <h1 padding-left></h1>\\r\\n      <ion-card padding>\\r\\n        <p class=\\\"placeholder-animation placeholder-text-p-40\\\"></p>\\r\\n        <div class=\\\"status placeholder-animation placeholder-text-p-20\\\"></div>\\r\\n\\r\\n        <!-- <article class=\\\"special-product\\\">\\r\\n          <div class=\\\"left-side\\\" col-12>\\r\\n            <h2 class=\\\"placeholder-animation placeholder-text-p-40\\\"></h2>\\r\\n            <p class=\\\"placeholder-animation placeholder-text-p-80\\\"></p>\\r\\n            <p class=\\\"placeholder-animation placeholder-text-p-60\\\"></p>\\r\\n          </div>\\r\\n        </article> -->\\r\\n      </ion-card>\\r\\n    </section>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"filials\\\">\\r\\n    <div *ngFor=\\\"let filial of filials | orderBy:['distance']; let i = index\\\">\\r\\n      <span style=\\\"margin-top: 0.7em\\\" *ngIf=\\\"i == 0\\\">&nbsp;</span>\\r\\n      <card-promotion [filial]=\\\"filial\\\"></card-promotion>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</ion-content>\"","module.exports = \"\"","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { NavController, ModalController } from '@ionic/angular';\r\nimport { PromotionFilterAppPage } from '../promotion-filter-app/promotion-filter-app.page';\r\nimport { Subscription, of, combineLatest, pipe } from 'rxjs';\r\nimport { map, flatMap, catchError } from 'rxjs/operators';\r\nimport { SharedService } from '../../../services/shared.service';\r\nimport { User } from '../../../../models/user';\r\nimport { Location } from '../../../panel/components/nano-address/nano-address.component';\r\nimport { PlacesService } from '../../../services/places.service';\r\nimport { Filial } from '../../../../models/filial';\r\nimport { getDistanceBetweenPoints } from '../../../util/util';\r\nimport { SystemService } from '../../../services/system.service';\r\nimport { Company } from '../../../../models/company';\r\n\r\n@Component({\r\n  selector: 'app-promotion-app',\r\n  templateUrl: './promotion-app.page.html',\r\n  styleUrls: ['./promotion-app.page.scss'],\r\n})\r\nexport class PromotionAppPage implements OnInit {\r\n\r\n  filials: Filial[]\r\n\r\n  loading: boolean = true;\r\n  existsFilials: boolean = false;\r\n\r\n  error: {\r\n    code: number,\r\n    title: string,\r\n    message: string\r\n  };\r\n\r\n  userSubscription: Subscription\r\n\r\n  get locationUser(): Location {\r\n    return this.shared.locationUser\r\n  }\r\n\r\n  constructor(public navCtrl: NavController, public modalCtrl: ModalController, public shared: SharedService,\r\n    public placesProvider: PlacesService, public system: SystemService, public change: ChangeDetectorRef) {\r\n      \r\n    }\r\n\r\n  ngOnInit() {\r\n    this.loadPromotions();\r\n  }\r\n\r\n  private loadPromotions() {\r\n    console.log(\"carregar promoções \");\r\n\r\n    if (this.userSubscription) {\r\n      this.userSubscription.unsubscribe();\r\n      this.userSubscription = undefined\r\n    }\r\n    this.loading = true\r\n    this.existsFilials = true;\r\n    this.error = undefined;\r\n\r\n    this.userSubscription = this.shared.user$.subscribe((user: User) => {\r\n      this.error = undefined;\r\n\r\n      let obs$ = of(null)\r\n\r\n      if (user && user.location) {\r\n        this.shared.locationUser = user.location\r\n      } else if (!this.locationUser) {\r\n        obs$ = this.placesProvider.getCurrentLocation()\r\n          .pipe(flatMap((location: Location) => {\r\n\r\n            this.shared.locationUser = location;\r\n            if (user && !user.location) {\r\n              return this.placesProvider.saveLocationHistory(location)\r\n            }\r\n            return of(null)\r\n          }))\r\n      }\r\n\r\n\r\n      //Obter filiais ativas\r\n      obs$.pipe(flatMap(() => {\r\n        return Filial.list([{\r\n          name: 'active',\r\n          operator: '==',\r\n          value: true\r\n        }])\r\n      }))\r\n        //Obter filiais com suas respectivas empresas (company_full)\r\n        .pipe(flatMap((filials: Filial[]) => {\r\n          if (!filials || filials.length <= 0) return of([])\r\n\r\n          return combineLatest(filials.map((filial) => Company.object(filial.company.id)))\r\n            .pipe(map((companies: Company[]) => {\r\n\r\n              for (let i = 0; i < companies.length; i++) {\r\n                filials[i].company_full = companies[i];\r\n              }\r\n              return filials.filter((filial: Filial) => {\r\n                //Filtrar apenas as filiais que possuem seus restaurantes ATIVOS\r\n                return filial.company_full.active;\r\n              })\r\n            }))\r\n        }))\r\n        //Filiais com a distância ao usuário\r\n        .pipe(map((filials: Filial[]) => {\r\n          if (!filials || filials.length <= 0) return []\r\n          let start = {\r\n            lat: this.locationUser.latitude,\r\n            lng: this.locationUser.longitude\r\n          }\r\n          for (let i = 0; i < filials.length; i++) {\r\n            let end = {\r\n              lat: filials[i].location.latitude,\r\n              lng: filials[i].location.longitude\r\n            }\r\n            filials[i].distance = getDistanceBetweenPoints(start, end); //distância em km do usuário à filial\r\n          }\r\n\r\n          //Caso precise de distância máxima para promoções\r\n          // return filials.filter(filial => {\r\n          //   return filial.distance <= MAX_DISTANCE\r\n          // });\r\n\r\n\r\n          return filials\r\n\r\n        })).pipe(flatMap((filials: Filial[]) => {\r\n          if (!filials || filials.length <= 0) return of([])\r\n          return combineLatest(filials.map((filial) => {\r\n            return Filial.promotion_stock.list(filial.id, [{ name: 'active', operator: '==', value: true }])\r\n              .pipe(map((promotions_stock) => {\r\n                filial.promotions_full = promotions_stock\r\n                console.log(\"Filial com promotions: \", filial);\r\n                this.change.detectChanges();\r\n                return filial\r\n              }))\r\n          }))\r\n        }))\r\n        .subscribe((filials: Filial[]) => {\r\n          this.loading = false;\r\n          // Verificar se não existe filiais.\r\n          if (!filials || filials.length <= 0) {\r\n            this.existsFilials = false;\r\n            this.change.detectChanges();\r\n          }\r\n          //EXIBIR PROMOÇÕES\r\n          else {\r\n            this.filials = filials;\r\n            this.existsFilials = true;\r\n            setTimeout(() => {\r\n              this.change.detectChanges()\r\n            }, 10)\r\n          }\r\n        }, pipe(catchError((err) => {\r\n          this.system.logEvent(\"filials_not_found\")\r\n          if (err.code == 1) {\r\n            this.error = {\r\n              code: 1,\r\n              title: \"Geolocalização não autorizada\",\r\n              message: \"Por favor autorize o aplicativo Facilita a obtê-la ou cadastre um novo endereço para que possamos exibir os estabelecimentos próximos a você\"\r\n            }\r\n          }\r\n          else if (err.code == 2) {\r\n            this.error = {\r\n              code: 2,\r\n              title: \"Geolocalização indisponível\",\r\n              message: \"Por favor habilite seu GPS ou cadastre um novo endereço para que possamos exibir os estabelecimentos próximos a você\"\r\n            }\r\n          }\r\n          else if (err.code == 3) {\r\n            this.error = {\r\n              code: 3,\r\n              title: \"Tempo para obter geolocalização foi excedido\",\r\n              message: \"Por favor verifique se seu GPS está habilitado e tente novamente, ou cadastre um novo endereço para que possamos exibir os estabelecimentos próximos a você\"\r\n            }\r\n          }\r\n          this.loading = false;\r\n          this.change.detectChanges()\r\n          return of([]);\r\n        })));\r\n      this.change.detectChanges()\r\n    })\r\n  }\r\n\r\n  dismiss() {\r\n    this.navCtrl.goBack();\r\n  }\r\n\r\n\r\n  async openFilter() {\r\n    console.log(\"Abrir filtro\");\r\n    let modal = await this.modalCtrl.create({\r\n      component: PromotionFilterAppPage\r\n    })\r\n    modal.present();\r\n  }\r\n\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PromotionFilterAppPage } from './promotion-filter-app.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule\r\n  ],\r\n  declarations: [PromotionFilterAppPage],\r\n  entryComponents: [PromotionFilterAppPage]\r\n})\r\nexport class PromotionFilterAppPageModule { }\r\n","module.exports = \"<ion-header no-border class=\\\"app\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\" hideBackButton=\\\"true\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"dismiss()\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"ios-arrow-back\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"title-default\\\">\\r\\n      <h3 ion-text class=\\\"my-font-logo\\\" no-margin>ESCOLHA SUAS CATEGORIAS</h3>\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <h1>Muitas categorias</h1>\\r\\n  <h1>Muitas categorias</h1>\\r\\n  <h1>Muitas categorias</h1>\\r\\n  <h1>Muitas categorias</h1>\\r\\n</ion-content>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-promotion-filter-app',\r\n  templateUrl: './promotion-filter-app.page.html',\r\n  styleUrls: ['./promotion-filter-app.page.scss'],\r\n})\r\nexport class PromotionFilterAppPage implements OnInit {\r\n\r\n  constructor(public modalCtrl: ModalController) { }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  dismiss() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}