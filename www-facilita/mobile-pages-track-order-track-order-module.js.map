{"version":3,"sources":["webpack:///./src/app/mobile/pages/track-order/track-order.module.ts","webpack:///./src/app/mobile/pages/track-order/track-order.page.html","webpack:///./src/app/mobile/pages/track-order/track-order.page.scss","webpack:///./src/app/mobile/pages/track-order/track-order.page.ts"],"names":[],"mappings":"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","file":"mobile-pages-track-order-track-order-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { TrackOrderPage } from './track-order.page';\r\nimport { GlobalComponentsModule } from '../../../components/global-components.module';\r\nimport { MobileComponentsModule } from '../../components/mobile-components.module';\r\nimport { PipesModule } from '../../../pipes/pipes.module';\r\nimport { DetailOrderPageModule } from '../detail-order/detail-order.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: TrackOrderPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    //Custom Modules\r\n    GlobalComponentsModule,\r\n    MobileComponentsModule,\r\n    DetailOrderPageModule,\r\n    PipesModule,\r\n\r\n    //Default Modules\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [TrackOrderPage]\r\n})\r\nexport class TrackOrderPageModule {}\r\n","module.exports = \"<ion-header no-border class=\\\"app\\\">\\r\\n  <ion-toolbar class=\\\"header-toolbar\\\" color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"back()\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"ios-arrow-back\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <h3 ion-text text-uppercase color=\\\"light\\\" class=\\\"my-font-logo\\\">ACOMPANHE SEU PEDIDO</h3>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <div *ngIf=\\\"filial && order\\\">\\r\\n    <mr-card-filial [filial]=\\\"filial\\\" [order]=\\\"order\\\" [phone]=\\\"true\\\"></mr-card-filial>\\r\\n  </div>\\r\\n  <ion-card class=\\\"see-details shadow shadow-light\\\">\\r\\n    <ion-button color=\\\"primary\\\" fill=\\\"clear\\\" (click)=\\\"goDetailOrder()\\\" expand=\\\"block\\\">Ver detalhes</ion-button>\\r\\n  </ion-card>\\r\\n\\r\\n  <div *ngIf=\\\"order\\\">\\r\\n    <mr-status-order [order]=\\\"order\\\"></mr-status-order>\\r\\n  </div>\\r\\n\\r\\n</ion-content>\"","module.exports = \"ion-card {\\n  background: white;\\n  --background: white; }\\n\\n.my-font-logo {\\n  margin: 0px !important; }\\n\\n.see-details {\\n  margin: 0px !important;\\n  width: 100% !important;\\n  border-radius: 0px !important; }\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Filial } from '../../../../models/filial';\r\nimport { Order } from '../../../../models/order';\r\nimport { NavController, AlertController, ModalController } from '@ionic/angular';\r\nimport { SystemService } from '../../../services/system.service';\r\nimport { Observable, Subscription, of, from, combineLatest } from 'rxjs';\r\nimport { map, tap, flatMap, first, catchError } from 'rxjs/operators';\r\nimport { ActivatedRoute, ParamMap } from '@angular/router';\r\nimport { SharedService } from '../../../services/shared.service';\r\nimport { DetailOrderPage } from '../detail-order/detail-order.page';\r\n\r\n@Component({\r\n  selector: 'app-track-order',\r\n  templateUrl: './track-order.page.html',\r\n  styleUrls: ['./track-order.page.scss'],\r\n})\r\nexport class TrackOrderPage implements OnInit {\r\n\r\n  filial: Filial;\r\n\r\n  order: Order;\r\n\r\n  index: number;\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public alertCtrl: AlertController,\r\n    public shared: SharedService,\r\n    public modalCtrl: ModalController,\r\n    public route: ActivatedRoute,\r\n    public system: SystemService) {\r\n\r\n    // this.order = this.navParams.get('order');\r\n\r\n\r\n  }\r\n\r\n  subscription_filial: Subscription\r\n  subscription_order: Subscription\r\n\r\n  ngOnInit() {\r\n    // this.route.paramMap.subscribe((params: ParamMap) => {\r\n    //   this.order = params.get('order');\r\n    // })\r\n\r\n    this.route.paramMap.pipe(flatMap(\r\n      (params) => {\r\n        this.index = Number(params.get('index_order'));\r\n        console.log(\"Index: \", this.index);\r\n        return this.shared.pending_orders$\r\n      }\r\n    )).pipe(first()).subscribe((orders) => {\r\n      if (this.index) {\r\n        this.order = orders[this.index];\r\n      }\r\n      else {\r\n        this.order = orders[0];\r\n      }\r\n    })\r\n\r\n    if (this.order && this.order.filial && this.order.filial.id) {\r\n      this.subscription_filial = Filial.object(this.order.filial.id).subscribe((filial: Filial) => {\r\n        this.filial = filial;\r\n      })\r\n    }\r\n\r\n    if (this.order && this.order.id) {\r\n      this.subscription_order = Order.object(this.order.id).subscribe((order: Order) => {\r\n        this.order = order\r\n      })\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.subscription_filial) {\r\n      this.subscription_filial.unsubscribe();\r\n    }\r\n    if (this.subscription_order) {\r\n      this.subscription_order.unsubscribe();\r\n    }\r\n  }\r\n\r\n  ionViewDidEnter(): void {\r\n    this.system.setScreenName(\"TrackOrderPage\")\r\n  }\r\n\r\n  async goDetailOrder() {\r\n    // this.navCtrl.push(DetailOrderPage, {\r\n    //   order: this.order\r\n    // });\r\n\r\n    let modal = await this.modalCtrl.create({\r\n      component: DetailOrderPage,\r\n      componentProps: {\r\n        order: this.order\r\n      }\r\n    })\r\n    modal.present();\r\n\r\n  }\r\n\r\n  async help() {\r\n    const alert = await this.alertCtrl.create({\r\n      header: 'Ajuda',\r\n      message: \"Status atual do seu pedido. Para mais detalhes do seu pedido, clique em 'VER DETALHES'.\",\r\n      buttons: [{ role: 'cancel', text: 'ok' }]\r\n    })\r\n    alert.present()\r\n  }\r\n\r\n  back() {\r\n    this.navCtrl.goBack();\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}