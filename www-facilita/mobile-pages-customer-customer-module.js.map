{"version":3,"sources":["webpack:///./src/app/mobile/pages/customer/customer.module.ts","webpack:///./src/app/mobile/pages/customer/customer.page.html","webpack:///./src/app/mobile/pages/customer/customer.page.scss","webpack:///./src/app/mobile/pages/customer/customer.page.ts"],"names":[],"mappings":"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","file":"mobile-pages-customer-customer-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CustomerPage } from './customer.page';\r\nimport { GlobalComponentsModule } from '../../../components/global-components.module';\r\nimport { MobileComponentsModule } from '../../components/mobile-components.module';\r\nimport { PipesModule } from '../../../pipes/pipes.module';\r\nimport { PhoneEditPageModule } from '../phone-edit/phone-edit.module';\r\nimport { CustomerAddressPageModule } from '../customer-address/customer-address.module';\r\nimport { EvaluateOrderPageModule } from '../evaluate-order/evaluate-order.module';\r\nimport { PromotionDetailAppPageModule } from '../promotion-detail-app/promotion-detail-app.module';\r\nimport { PromotionDetailAppPage } from '../promotion-detail-app/promotion-detail-app.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CustomerPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    //Custom Modules\r\n    GlobalComponentsModule,\r\n    MobileComponentsModule,\r\n    PipesModule,\r\n    PhoneEditPageModule,\r\n    CustomerAddressPageModule,\r\n    EvaluateOrderPageModule,\r\n    PromotionDetailAppPageModule,\r\n\r\n    //Default Modules\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [CustomerPage],\r\n  entryComponents: [PromotionDetailAppPage]\r\n})\r\nexport class CustomerPageModule { }\r\n","module.exports = \"<ion-header no-border class=\\\"app\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\" hideBackButton=\\\"true\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"dismiss()\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"ios-arrow-back\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"title-default\\\">\\r\\n      <h3 ion-text class=\\\"my-font-logo\\\" no-margin>MEU PERFIL</h3>\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <section class=\\\"profile shadow shadow-light\\\" margin-vertical>\\r\\n    <header>\\r\\n      <ion-item no-lines>\\r\\n        <nano-thumb class=\\\"profile-img\\\" [round]=\\\"true\\\" [src]=\\\"shared.user?.image\\\" item-start *ngIf=\\\"shared.user?.image\\\"></nano-thumb>\\r\\n        <ion-label>\\r\\n          <h2 style=\\\"font-weight: bold\\\" ion-text class=\\\"name-user\\\">{{shared.user?.name}}</h2>\\r\\n          <p tappable (click)=\\\"logout()\\\" class=\\\"danger\\\">Sair</p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n    </header>\\r\\n\\r\\n    <ion-item class=\\\"address\\\" (click)=\\\"editAddress()\\\" no-lines>\\r\\n      <ion-icon class=\\\"place-icon\\\" name=\\\"md-pin\\\" slot=\\\"start\\\"></ion-icon>\\r\\n      <p *ngIf=\\\"shared?.user?.location; else noAddress\\\" tappable>\\r\\n        <span class=\\\"line1 bold\\\">{{shared.user.location.street}}, {{shared.user.location.number}} </span>\\r\\n        <br />\\r\\n        <span class=\\\"line2\\\">{{shared.user.location.district}} - {{shared.user.location.city}}</span>\\r\\n      </p>\\r\\n      <ng-template #noAddress>\\r\\n        <p tappable>\\r\\n          <span class=\\\"line1\\\">Endereço não cadastrado</span>\\r\\n          <br />\\r\\n          <span class=\\\"line2\\\">Clique aqui</span>\\r\\n        </p>\\r\\n      </ng-template>\\r\\n      <ion-icon name=\\\"md-create\\\" slot=\\\"end\\\"></ion-icon>\\r\\n      <!-- <ion-icon name=\\\"md-create\\\" item-end></ion-icon> -->\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item class=\\\"phone\\\" (click)=\\\"editPhone()\\\" no-lines>\\r\\n      <ion-icon class=\\\"place-icon\\\" name=\\\"md-call\\\" slot=\\\"start\\\"></ion-icon>\\r\\n      <p *ngIf=\\\"shared?.user?.phone; else noPhone\\\" tappable>\\r\\n        <span class=\\\"line1 bold\\\">Telefone:</span>\\r\\n        <br />\\r\\n        <span class=\\\"line2\\\">{{shared.user.phone}}</span>\\r\\n      </p>\\r\\n      <ng-template #noPhone>\\r\\n        <p tappable>\\r\\n          <span class=\\\"line1\\\">Telefone não cadastrado</span>\\r\\n          <br />\\r\\n          <span class=\\\"line2\\\">Clique aqui</span>\\r\\n        </p>\\r\\n      </ng-template>\\r\\n      <ion-icon name=\\\"md-create\\\" slot=\\\"end\\\"></ion-icon>\\r\\n      <!-- <ion-icon name=\\\"md-create\\\" item-end></ion-icon> -->\\r\\n    </ion-item>\\r\\n\\r\\n    <footer>\\r\\n      <ion-segment color=\\\"primary\\\" [(ngModel)]=\\\"segment\\\">\\r\\n        <ion-segment-button tappable value=\\\"orders\\\">\\r\\n          Pedidos\\r\\n        </ion-segment-button>\\r\\n        <ion-segment-button tappable value=\\\"favorites\\\">\\r\\n          Favoritos\\r\\n        </ion-segment-button>\\r\\n        <ion-segment-button tappable value=\\\"coupon\\\">\\r\\n          Cupons\\r\\n        </ion-segment-button>\\r\\n      </ion-segment>\\r\\n    </footer>\\r\\n  </section>\\r\\n\\r\\n  <!-- Lista de Pedidos -->\\r\\n  <ion-list [hidden]=\\\"segment !== 'orders'\\\">\\r\\n\\r\\n    <ion-item *ngIf=\\\"!existsOrders\\\" color=\\\"transparent\\\" no-lines>\\r\\n      <h2 ion-text text-center color=\\\"discret\\\" text-wrap>Você ainda não possui nenhum pedido no seu histórico</h2>\\r\\n    </ion-item>\\r\\n\\r\\n    <!-- Animação de loading -->\\r\\n    <div *ngIf=\\\"loadingOrders\\\">\\r\\n      <section margin-top class=\\\"placeholder\\\" *ngFor=\\\"let f of [1, 2, 3, 4]\\\">\\r\\n        <ion-card padding>\\r\\n          <div class=\\\"placeholder-animation image\\\"></div>\\r\\n          <div class=\\\"card-bottom\\\">\\r\\n            <h2 class=\\\"placeholder-animation placeholder-text-p-50\\\"></h2>\\r\\n            <p class=\\\"placeholder-animation placeholder-text-p-80\\\"></p>\\r\\n            <div class=\\\"status placeholder-animation placeholder-text-p-60\\\"></div>\\r\\n          </div>\\r\\n        </ion-card>\\r\\n      </section>\\r\\n    </div>\\r\\n\\r\\n    <!-- Pedido -->\\r\\n    <div class=\\\"orders shadow shadow-light\\\" *ngFor=\\\"let order of orders$ | async\\\" no-lines tappable (click)=\\\"goDetailOrder(order)\\\">\\r\\n      <div class=\\\"container-top\\\" *ngIf=\\\"order.filial_full\\\">\\r\\n        <div class=\\\"top-left\\\">\\r\\n          <nano-thumb [src]=\\\"order.filial_full.image\\\" slot=\\\"start\\\"></nano-thumb>\\r\\n        </div>\\r\\n        <div class=\\\"top-right\\\">\\r\\n          <div class=\\\"filial-name\\\">\\r\\n            <h2>{{order.filial_full.name}}</h2>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"order?.filial_full?.rating?.rate\\\">\\r\\n            <ion-icon name=\\\"star\\\" color=\\\"primary\\\" class=\\\"icon-star\\\"></ion-icon>\\r\\n            <span class=\\\"number-star\\\">\\r\\n              <strong>{{order.filial_full.rating.rate | number : '1.1-1'}}</strong>\\r\\n            </span>\\r\\n            <span class=\\\"already-rated\\\" *ngIf=\\\"order?.evaluate?.rate\\\">(sua avaliação\\r\\n              <strong>{{order?.evaluate?.rate | number: '1.1-1'}})</strong>\\r\\n            </span>\\r\\n          </div>\\r\\n          <div class=\\\"order-cancel\\\" *ngIf=\\\"order?.status === OrderStatus.incomplete || order?.status === OrderStatus.away || order?.status === OrderStatus.refused\\\">\\r\\n            <span class=\\\"already-rated\\\">\\r\\n              Pedido cancelado\\r\\n            </span>\\r\\n            <span class=\\\"already-rated\\\" *ngIf=\\\"order?.cancellation_reason\\\">\\r\\n              <strong>Motivo: </strong>{{order?.cancellation_reason}}</span>\\r\\n          </div>\\r\\n          <p class=\\\"date\\\">{{getDateFormat(order.created_at)}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <footer class=\\\"top-product\\\">\\r\\n        <p ion-text text-wrap class=\\\"max-lines max-lines-1\\\">\\r\\n          <span *ngFor=\\\"let entrie of order.entries; let i = index\\\">\\r\\n            <span *ngIf=\\\"i>0\\\">, </span>{{entrie.product.name}}</span>\\r\\n        </p>\\r\\n      </footer>\\r\\n      <ion-button expand=\\\"block\\\" fill=\\\"clear\\\" (click)=\\\"evaluate(order)\\\" *ngIf=\\\"!order?.evaluate?.rate && order?.status === OrderStatus.done\\\">Avalie\\r\\n        esse pedido</ion-button>\\r\\n    </div>\\r\\n\\r\\n  </ion-list>\\r\\n\\r\\n  <!-- Lista de Favoritos -->\\r\\n  <ion-list [hidden]=\\\"segment !== 'favorites'\\\">\\r\\n    <ion-item *ngIf=\\\"!existsFavorites\\\" color=\\\"transparent\\\" no-lines>\\r\\n      <h2 ion-text text-center color=\\\"discret\\\" text-wrap>Você ainda não favoritou nenhum restaurante</h2>\\r\\n    </ion-item>\\r\\n\\r\\n    <!-- Filiais favoritadas -->\\r\\n\\r\\n    <card-filial-list *ngFor=\\\"let filial of filials$ | async | orderBy:'-open'\\\" [filial]=\\\"filial\\\" (click)=\\\"goFilialMenu(filial)\\\"\\r\\n      [hidden]=\\\"loadingFavorites\\\"></card-filial-list>\\r\\n\\r\\n    <!-- Efeito visual de carregando componentes -->\\r\\n    <div *ngIf=\\\"loadingFavorites\\\">\\r\\n      <section margin-top class=\\\"placeholder\\\" *ngFor=\\\"let f of [1, 2, 3, 4]\\\">\\r\\n        <ion-card padding>\\r\\n          <div class=\\\"placeholder-animation image\\\"></div>\\r\\n          <div class=\\\"card-bottom\\\">\\r\\n            <h2 class=\\\"placeholder-animation placeholder-text-p-50\\\"></h2>\\r\\n            <p class=\\\"placeholder-animation placeholder-text-p-80\\\"></p>\\r\\n            <div class=\\\"status placeholder-animation placeholder-text-p-60\\\"></div>\\r\\n          </div>\\r\\n        </ion-card>\\r\\n      </section>\\r\\n    </div>\\r\\n  </ion-list>\\r\\n\\r\\n  <!-- Lista de Cupons -->\\r\\n  <ion-list [hidden]=\\\"segment !== 'coupon'\\\">\\r\\n    <ion-item *ngIf=\\\"!existsCoupon\\\" color=\\\"transparent\\\" no-lines>\\r\\n      <h2 ion-text text-center color=\\\"discret\\\" text-wrap>Você ainda não possui nenhum cupom.</h2>\\r\\n    </ion-item>\\r\\n\\r\\n    <div *ngIf=\\\"!loadingCoupons && existsCoupon && coupons && coupons[0].promotion_full\\\">\\r\\n      <card-promotion [coupons]=\\\"coupons\\\"></card-promotion>\\r\\n    </div>\\r\\n\\r\\n    <!-- Efeito visual de carregando componentes -->\\r\\n    <div *ngIf=\\\"loadingCoupons\\\">\\r\\n      <section margin-top class=\\\"placeholder\\\" *ngFor=\\\"let f of [1, 2, 3, 4]\\\">\\r\\n        <ion-card padding>\\r\\n          <div class=\\\"placeholder-animation image\\\"></div>\\r\\n          <div class=\\\"card-bottom\\\">\\r\\n            <h2 class=\\\"placeholder-animation placeholder-text-p-50\\\"></h2>\\r\\n            <p class=\\\"placeholder-animation placeholder-text-p-80\\\"></p>\\r\\n            <div class=\\\"status placeholder-animation placeholder-text-p-60\\\"></div>\\r\\n          </div>\\r\\n        </ion-card>\\r\\n      </section>\\r\\n    </div>\\r\\n  </ion-list>\\r\\n\\r\\n  <br>\\r\\n  <br>\\r\\n  <br>\\r\\n</ion-content>\\r\\n\\r\\n<!-- Float button com informações sobre o pedido-->\\r\\n<fab-order></fab-order>\"","module.exports = \"ion-header ion-title {\\n  font-family: myFontBold !important; }\\n\\nion-header ion-icon {\\n  font-size: 1.2em;\\n  margin: 0px 5px; }\\n\\nion-content div.orders {\\n  background: white !important;\\n  margin-bottom: 10px;\\n  padding-left: 10px;\\n  padding-right: 10px; }\\n\\nion-content div.orders div.container-top {\\n    display: flex;\\n    align-items: center; }\\n\\nion-content div.orders div.container-top div.top-right {\\n      margin-left: 8px; }\\n\\nion-content div.orders .filial-name {\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between;\\n    flex-wrap: wrap;\\n    font-weight: bold; }\\n\\nion-content div.orders .number-star {\\n    font-size: 0.9em;\\n    color: var(--ion-color-primary); }\\n\\nion-content div.orders .icon-star {\\n    font-size: 0.9em;\\n    color: var(--ion-color-primary); }\\n\\nion-content div.orders .already-rated {\\n    color: darkgray;\\n    margin-left: 5px;\\n    font-size: 0.8em; }\\n\\nion-content div.orders .order-cancel {\\n    color: var(--ion-color-danger);\\n    display: flex;\\n    flex-direction: column; }\\n\\nion-content div.orders .order-cancel span {\\n      white-space: normal; }\\n\\nion-content div.orders .date {\\n    font-size: 0.8em;\\n    color: var(--ion-color-medium); }\\n\\nion-content div.orders footer.top-product {\\n    border-top: 2px solid rgba(2, 2, 2, 0.18) !important;\\n    padding-bottom: 14px; }\\n\\nion-content div.orders footer.top-product p {\\n      color: black !important;\\n      margin-bottom: 2px; }\\n\\nion-content div.orders ion-button {\\n    padding-bottom: 6px; }\\n\\nion-content ion-item {\\n  --background: white;\\n  --color: #666;\\n  display: flex !important; }\\n\\nion-content h2 {\\n  color: var(--color-discret);\\n  font-size: 1em; }\\n\\nion-content .name-user {\\n  display: block;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  margin-right: 30px; }\\n\\nion-content .address {\\n  border-top: solid 2px #ddd !important;\\n  border-bottom: solid 2px #ddd !important; }\\n\\nion-content .phone {\\n  border-bottom: solid 2px #ddd !important; }\\n\\nion-content .place-icon {\\n  color: var(--ion-color-primary) !important; }\\n\\nion-content coin-ranguitos .content {\\n  display: flex;\\n  justify-content: flex-start; }\\n\\nion-content ion-label p.danger {\\n  position: absolute;\\n  top: 2em;\\n  right: 1em;\\n  color: var(--ion-color-danger) !important;\\n  margin-top: -8px;\\n  font-size: 1.2em; }\\n\\nion-content .scroll-content {\\n  padding: 0px; }\\n\\nion-content section.profile {\\n  background: white; }\\n\\nion-content section.profile .profile-img {\\n    margin-top: 15px !important;\\n    padding-bottom: 13px; }\\n\\nion-content section.profile ion-label {\\n    padding: 0px 10px 0px 10px; }\\n\\nion-content section.profile .street {\\n    border-top: 1px solid #eceff1;\\n    border-bottom: 1px solid #eceff1; }\\n\\nion-content .center {\\n  background-color: white;\\n  color: #666;\\n  padding: 16px;\\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12); }\\n\\nion-content .center article {\\n    display: flex; }\\n\\nion-content .center article aside {\\n      -ms-grid-row-align: center;\\n          align-self: center;\\n      margin: 12px; }\\n\\nion-content .center article nano-thumb {\\n      -ms-grid-row-align: center;\\n          align-self: center; }\\n\\nion-content .center article h3,\\n    ion-content .center article h5,\\n    ion-content .center article h6 {\\n      font-weight: 100; }\\n\\nion-content .center section {\\n    margin: 16px; }\\n\\nion-content .order-item-placeholder .image {\\n  width: 56px;\\n  height: 56px; }\\n\\nion-content section.placeholder {\\n  position: relative;\\n  margin-top: 1em; }\\n\\nion-content section.placeholder h1 {\\n    min-height: 1em; }\\n\\nion-content section.placeholder .image {\\n    width: 60px;\\n    height: 60px;\\n    float: left;\\n    border-radius: 50px; }\\n\\nion-content section.placeholder div.card-bottom {\\n    float: right;\\n    width: 80%;\\n    margin-top: -15px;\\n    padding-left: 10px; }\\n\\nion-content section.placeholder ion-card {\\n    box-shadow: none;\\n    border-radius: 0px !important; }\\n\\nion-content section.placeholder ion-card .status {\\n      margin-top: 4px; }\\n\\nion-content ion-list ion-item {\\n  --margin-bottom: 10px !important; }\\n\\nion-content .bold {\\n  font-weight: bold; }\\n\"","import { Observable, of, from, combineLatest, Subscription, pipe } from 'rxjs';\r\nimport { map, tap, flatMap, first, catchError, mergeMap } from 'rxjs/operators';\r\nimport { NavController, ModalController, AlertController, ToastController, IonApp } from '@ionic/angular';\r\nimport { OrderStatus, Order } from '../../../../models/order';\r\nimport { Component, ChangeDetectorRef } from '@angular/core';\r\nimport { Filial } from '../../../../models/filial';\r\nimport { AuthenticationService } from '../../../services/authentication.service';\r\nimport { SharedService } from '../../../services/shared.service';\r\nimport { SystemService } from '../../../services/system.service';\r\nimport { User } from '../../../../models/user';\r\nimport * as moment from 'moment';\r\nimport { EvaluateOrderPage } from '../evaluate-order/evaluate-order.page';\r\nimport { PhoneEditPage } from '../phone-edit/phone-edit.page';\r\nimport { CustomerAddressPage } from '../customer-address/customer-address.page';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { getDistanceBetweenPoints } from '../../../util/util';\r\nimport { Location } from '../../../panel/components/nano-address/nano-address.component';\r\nimport { PlacesService } from '../../../services/places.service';\r\nimport { Company } from '../../../../models/company';\r\nimport { OrderPromotion } from '../../../../models/order-promotion';\r\nimport { Promotion } from '../../../../models/promotion';\r\n\r\n@Component({\r\n  selector: 'app-customer',\r\n  templateUrl: './customer.page.html',\r\n  styleUrls: ['./customer.page.scss'],\r\n})\r\nexport class CustomerPage {\r\n\r\n  segment: 'favorites' | 'orders' | 'coupon' = \"orders\";\r\n  loadingFavorites: boolean = true;\r\n  loadingOrders: boolean = true;\r\n  loadingCoupons: boolean = true;\r\n  existsFavorites: boolean = true\r\n  existsOrders: boolean = true\r\n  existsCoupon: boolean = true;\r\n\r\n  //auxiliar para controlar click de elementos html filho-pai\r\n  clickEvaluate: boolean = false;\r\n\r\n  OrderStatus = OrderStatus\r\n\r\n  //Array de filials favoritas\r\n  public filials$: Observable<Filial[]>;\r\n\r\n  public orders$: Observable<Order[]>;\r\n\r\n  public pageBefore;\r\n\r\n  public error: {\r\n    code: number,\r\n    title: string,\r\n    message: string\r\n  };\r\n\r\n  public userSubscription: Subscription\r\n\r\n  public filials: Filial[];\r\n\r\n  public coupons\r\n\r\n  get locationUser(): Location {\r\n    return this.shared.locationUser\r\n  }\r\n\r\n  constructor(private auth: AuthenticationService,\r\n    public navCtrl: NavController,\r\n    public change: ChangeDetectorRef,\r\n    public modalCtrl: ModalController,\r\n    public shared: SharedService,\r\n    public alertCtrl: AlertController,\r\n    public placesProvider: PlacesService,\r\n    public toastCtrl: ToastController,\r\n    public route: ActivatedRoute,\r\n    public app: IonApp,\r\n    public system: SystemService) {\r\n    this.loadFavorites()\r\n    this.loadOldOrders();\r\n    this.loadCoupons();\r\n\r\n    this.route.paramMap.subscribe((params) => {\r\n      this.pageBefore = params.get('pageBefore');\r\n    })\r\n  }\r\n\r\n  ionViewDidEnter(): void {\r\n    this.system.setScreenName(\"CustomerPage\")\r\n  }\r\n\r\n  private loadCoupons() {\r\n    console.log(\"1\");\r\n    this.shared.user$.pipe(flatMap((user) => {\r\n      console.log(\"Obtido user: \", user)\r\n      return OrderPromotion.list([{\r\n        name: 'user.id',\r\n        operator: '==',\r\n        value: user.id\r\n      }])\r\n    }))\r\n      .pipe(flatMap((coupons: OrderPromotion[]) => {\r\n        console.log(\"cupons: \", coupons);\r\n        if (!coupons || coupons.length == 0) return of([])\r\n        this.coupons = coupons\r\n        return combineLatest(coupons.map((coupon) => Filial.object(coupon.filial.id)))\r\n      }))\r\n      //Obter a filial de cada cupom\r\n      .pipe(flatMap((filials: Filial[]) => {\r\n        console.log(\"3 - filials: \", filials);\r\n        if (!filials || filials.length == 0) return of([])\r\n        for (let i = 0; i < this.coupons.length; i++) {\r\n          this.coupons[i].filial_full = filials[i];\r\n        }\r\n        return combineLatest(this.coupons.map((coupon) => Promotion.object(coupon.promotion.id)))\r\n      }))\r\n      //Obter a promoção de cada cupom\r\n      .pipe(map((promotions: Promotion[]) => {\r\n        if (!promotions || promotions.length == 0) return of([])\r\n        console.log(\"4 - promotions\", promotions);\r\n        for (let i = 0; i < this.coupons.length; i++) {\r\n          this.coupons[i].promotion_full = promotions[i];\r\n        }\r\n        return this.coupons;\r\n      }))\r\n      .subscribe(() => {\r\n        console.log(\"Os cupons carregados são: \", this.coupons);\r\n        // Verificar SE EXISTE CUPONS\r\n        if (!this.coupons || this.coupons.length <= 0) {\r\n          this.existsCoupon = false;\r\n          this.loadingCoupons = false;\r\n          this.change.detectChanges();\r\n        }\r\n        //EXIBIR CUPONS\r\n        else {\r\n          this.existsCoupon = true;\r\n          this.loadingCoupons = false;\r\n          setTimeout(() => {\r\n            this.change.detectChanges()\r\n          }, 10)\r\n        }\r\n      }, pipe(catchError((err) => {\r\n        console.log(\"ocorreu um erro\", err);\r\n        this.system.logEvent(\"filials_not_found\")\r\n        if (err.code == 1) {\r\n          this.error = {\r\n            code: 1,\r\n            title: \"Geolocalização não autorizada\",\r\n            message: \"Por favor autorize o aplicativo Facilita a obtê-la ou cadastre um novo endereço para que possamos exibir os estabelecimentos próximos a você\"\r\n          }\r\n        }\r\n        else if (err.code == 2) {\r\n          this.error = {\r\n            code: 2,\r\n            title: \"Geolocalização indisponível\",\r\n            message: \"Por favor habilite seu GPS ou cadastre um novo endereço para que possamos exibir os estabelecimentos próximos a você\"\r\n          }\r\n        }\r\n        else if (err.code == 3) {\r\n          this.error = {\r\n            code: 3,\r\n            title: \"Tempo para obter geolocalização foi excedido\",\r\n            message: \"Por favor verifique se seu GPS está habilitado e tente novamente, ou cadastre um novo endereço para que possamos exibir os estabelecimentos próximos a você\"\r\n          }\r\n        }\r\n        this.loadingCoupons = false;\r\n        this.change.detectChanges()\r\n        return of([]);\r\n      }))\r\n      )\r\n  }\r\n\r\n  /**\r\n   * Carrega os restaurantes favoritos do usuário\r\n   */\r\n  loadFavorites() {\r\n    this.loadingFavorites = true;\r\n    this.filials$ = this.shared.user$.pipe(flatMap((user) => {\r\n      this.existsFavorites = true\r\n      this.loadingFavorites = true\r\n      if (!user) {\r\n        return of([]);\r\n      }\r\n      return User.favorites.list(user.id)\r\n    })).pipe(tap((filials: Filial[]) => {\r\n      if (!filials || filials.length <= 0) this.existsFavorites = false\r\n      else {\r\n        this.existsFavorites = true\r\n        for (let filial of filials) {\r\n          Filial.checkBusinessHours(filial, this.shared.now)\r\n        }\r\n      }\r\n      this.loadingFavorites = false;\r\n      console.log(\"Loading favoriteS: \", this.loadingFavorites);\r\n      setTimeout(() => {\r\n        this.change.detectChanges();\r\n      })\r\n    }))\r\n  }\r\n\r\n  loadOldOrders() {\r\n    this.orders$ = this.shared.user$.pipe(first()).pipe(flatMap((user) => {\r\n      this.existsOrders = true\r\n      this.loadingOrders = true\r\n      return User.orders.list(user.id, undefined, [{ name: \"created_at\", type: \"desc\" }])\r\n    })).pipe(flatMap((orders: Order[]) => {\r\n      if (!orders || orders.length <= 0) {\r\n        return of([])\r\n      }\r\n      return combineLatest(orders.map((order) => Filial.object(order.filial.id)))\r\n        .pipe(map((filials: Filial[]) => {\r\n          for (let i = 0; i < filials.length; i++) {\r\n            orders[i].filial_full = filials[i]\r\n          }\r\n          return orders\r\n        }))\r\n    })).pipe(map((orders: Order[]) => {\r\n      return orders.filter((order: Order) => {\r\n        return order.status === OrderStatus.done || order.status === OrderStatus.away ||\r\n          order.status === OrderStatus.incomplete || order.status === OrderStatus.refused\r\n      })\r\n    })).pipe(tap((orders: Order[]) => {\r\n      if (!orders || orders.length <= 0) {\r\n        this.existsOrders = false;\r\n      } else {\r\n        this.existsOrders = true\r\n      }\r\n      this.loadingOrders = false;\r\n      console.log(\"loading orders: \", this.loadingOrders);\r\n      setTimeout(() => {\r\n        this.change.detectChanges();\r\n      })\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Abre um modal com formulário pra editar endereço do usuário\r\n   */\r\n  async editAddress() {\r\n    let modal = await this.modalCtrl.create({\r\n      component: CustomerAddressPage\r\n    })\r\n    modal.present()\r\n  }\r\n\r\n  async editPhone() {\r\n    let modal = await this.modalCtrl.create({\r\n      component: PhoneEditPage,\r\n      componentProps: {\r\n        user: this.shared.user\r\n      }\r\n    });\r\n    modal.present();\r\n  }\r\n\r\n  async goFilialMenu(filial: Filial) {\r\n    Filial.checkBusinessHours(filial, this.shared.now)\r\n    if (filial.open) {\r\n      this.navCtrl.navigateForward(['mobile/filial-stock', {\r\n        id: filial.id\r\n      }])\r\n    }\r\n    else {\r\n\r\n      let prompt = await this.alertCtrl.create({\r\n        header: 'Restaurante está fechado',\r\n        message: \"Você ainda pode visualizar as informações do restaurante, mas não poderá realizar um pedido.\",\r\n        buttons: [\r\n          {\r\n            text: 'Cancelar',\r\n            handler: data => {\r\n            }\r\n          },\r\n          {\r\n            text: 'Continuar',\r\n            handler: () => {\r\n              this.navCtrl.navigateForward(['mobile/filial-stock', {\r\n                id: filial.id\r\n              }])\r\n            }\r\n          }\r\n        ]\r\n      });\r\n      prompt.present();\r\n    }\r\n  }\r\n\r\n  viewEvaluate(order) {\r\n\r\n  }\r\n\r\n  /**\r\n   * Realizar logout de usuário\r\n   */\r\n  async logout() {\r\n    let confirm = await this.alertCtrl.create({\r\n      header: 'Deslogar usuário',\r\n      message: 'Você tem certeza que gostaria de sair de sua conta? Caso tenha produtos adicionados no carrinho, eles serão perdidos.',\r\n      buttons: [\r\n        {\r\n          text: 'Cancelar'\r\n        },\r\n        {\r\n          text: 'Confirmar',\r\n          handler: () => {\r\n            this.auth.logout().subscribe(() => {\r\n              this.navCtrl.navigateRoot(this.shared.firstPage)\r\n            }, error => {\r\n              this.system.showErrorAlert(error, 'logout');\r\n            })\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    confirm.present()\r\n  }\r\n\r\n  dismiss() {\r\n    if (this.pageBefore && this.pageBefore == 'HomeApp') {\r\n      this.navCtrl.navigateRoot(['home-app'])\r\n    }\r\n    else {\r\n      this.navCtrl.navigateRoot(['mobile/filial-search']);\r\n    }\r\n  }\r\n\r\n  getDateFormat(timestamp: any) {\r\n    moment.locale('pt-BR');\r\n    return moment(timestamp.toDate()).format('LLL')\r\n  }\r\n\r\n  async help() {\r\n    let alert = await this.alertCtrl.create({\r\n      header: \"Sobre o seu perfil\",\r\n      message: \"Aqui você encontrará informações sobre seus pedidos antigos e restaurantes favoritos.\",\r\n      buttons: [\"Ok\"]\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  goDetailOrder(order: Order) {\r\n    if (!this.clickEvaluate) {\r\n      this.navCtrl.navigateForward(['mobile/detail-order', {\r\n        order_id: order.id //@todo DETAIL ORDER DEVE RECEBER O ID DE ORDER\r\n      }])\r\n    }\r\n    this.clickEvaluate = false;\r\n  }\r\n\r\n  async evaluate(order: Order) {\r\n    this.clickEvaluate = true;\r\n    let modal = await this.modalCtrl.create({\r\n      component: EvaluateOrderPage,\r\n      componentProps: {\r\n        order: order\r\n      }\r\n    });\r\n    modal.present();\r\n  }\r\n\r\n}"],"sourceRoot":""}