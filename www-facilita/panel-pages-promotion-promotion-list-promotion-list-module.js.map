{"version":3,"sources":["webpack:///./src/app/panel/pages/promotion/promotion-list/promotion-list.module.ts","webpack:///./src/app/panel/pages/promotion/promotion-list/promotion-list.page.html","webpack:///./src/app/panel/pages/promotion/promotion-list/promotion-list.page.scss","webpack:///./src/app/panel/pages/promotion/promotion-list/promotion-list.page.ts"],"names":[],"mappings":"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","file":"panel-pages-promotion-promotion-list-promotion-list-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PromotionListPage } from './promotion-list.page';\r\nimport { PipesModule } from '../../../../pipes/pipes.module';\r\nimport { NgPipesModule } from 'ngx-pipes';\r\nimport { GlobalComponentsModule } from '../../../../components/global-components.module';\r\nimport { PanelComponentsModule } from '../../../components/panel-components.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PromotionListPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    PanelComponentsModule,\r\n    GlobalComponentsModule,\r\n    NgPipesModule,\r\n    PipesModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [PromotionListPage]\r\n})\r\nexport class PromotionListPageModule { }\r\n","module.exports = \"<ion-header no-border>\\r\\n  <nano-navbar title=\\\"Promoções\\\" icon=\\\"menus-icon-ecommerce-41\\\">\\r\\n  </nano-navbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content padding>\\r\\n\\r\\n  <ion-card class=\\\"content-card\\\">\\r\\n    <ion-searchbar [(ngModel)]=\\\"searchString\\\" placeholder=\\\"Pesquisar\\\" (ionChange)=\\\"change()\\\">\\r\\n    </ion-searchbar>\\r\\n\\r\\n    <nano-loading [loading]=\\\"loading\\\">\\r\\n      <ion-list>\\r\\n        <div *ngFor=\\\"let promotion of promotions | filterBy:['name', 'description']:searchString; let i = index\\\">\\r\\n          <ion-item no-lines padding text-wrap class=\\\"product\\\">\\r\\n            <!-- Imagem -->\\r\\n            <nano-thumb [ngClass]=\\\"{ 'goneImage' : !promotion?.image }\\\" item-left [src]=\\\"promotion.image\\\"></nano-thumb>\\r\\n            <!-- Nome -->\\r\\n            <h2 text-wrap padding-top padding-horizontal>\\r\\n              {{promotion.name}}\\r\\n            </h2>\\r\\n            <!-- Descrição -->\\r\\n            <p text-wrap padding-horizontal>{{promotion.description}}</p>\\r\\n\\r\\n            <p text-wrap padding-horizontal>\\r\\n              R$ {{promotion.priceBase | number : '1.2-2'}}\\r\\n            </p>\\r\\n            <div item-right>\\r\\n              <ion-button (click)=\\\"edit(promotion)\\\" fill=\\\"clear\\\" color=\\\"proceed\\\">\\r\\n                <ion-icon name=\\\"md-create\\\"></ion-icon> Editar\\r\\n              </ion-button>\\r\\n            </div>\\r\\n          </ion-item>\\r\\n        </div>\\r\\n\\r\\n        <ion-item text-center padding *ngIf=\\\"!existsPromotions\\\">\\r\\n          <p ion-text>Você ainda não possui nenhuma promoção</p>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </nano-loading>\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button color=\\\"primary\\\" (click)=\\\"add()\\\">\\r\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab>\\r\\n\\r\\n</ion-content>\"","module.exports = \"ion-content {\\n  background-color: #f8f8f8 !important; }\\n\\nion-grid ion-icon {\\n  margin-top: 14px;\\n  font-size: 2.2em; }\\n\\nion-item-divider {\\n  border-bottom: none !important; }\\n\\nion-item-divider ion-label {\\n    margin-bottom: 0px !important; }\\n\\nion-item-divider h1 {\\n    color: #333333 !important;\\n    font-family: myFontBold !important;\\n    padding-top: 16px;\\n    font-size: 2.0em;\\n    text-align: left !important;\\n    margin: 0 0.7em;\\n    border-bottom: 1px dashed #999; }\\n\\nion-item {\\n  padding: 8px 16px 8px 16px !important; }\\n\\n@media (max-width: 400px) {\\n    ion-item {\\n      display: flex;\\n      flex-direction: column;\\n      margin-top: 10px; } }\\n\\nion-item ion-label {\\n    padding-left: 8px !important; }\\n\\nion-item ion-label h2 {\\n      font-weight: bold !important; }\\n\\nion-item nano-thumb.goneImage {\\n    display: none !important; }\\n\\nion-item button {\\n    padding: 8px !important; }\\n\\n.category-name {\\n  font-family: myFontBold;\\n  padding-top: 16px;\\n  font-size: 2.0em;\\n  text-align: left;\\n  margin: 0 0.7em;\\n  border-bottom: 1px dashed #999;\\n  margin-bottom: 10px !important; }\\n\\n.products {\\n  margin: auto; }\\n\\n.products .list-item {\\n    display: flex;\\n    margin: 0.6em 0 0.6em 1.6em;\\n    background-color: white !important; }\\n\\n.products .list-item .product-item {\\n      -ms-grid-row-align: center;\\n          align-self: center;\\n      margin-right: 1.2em; }\\n\\n.products .list-item .product-item .name {\\n        font-size: 1.4em;\\n        color: #666; }\\n\\n.products .list-item .product-item .description {\\n        font-size: 1em;\\n        color: #999; }\\n\\n.products .list-item .product-item .price {\\n        white-space: nowrap;\\n        font-size: 1.4em;\\n        color: #4c4; }\\n\\n.myfilter {\\n  display: flex; }\\n\\n.myfilter button {\\n    -ms-grid-row-align: center;\\n        align-self: center;\\n    margin-right: 8px !important; }\\n\"","import { Component, OnInit, OnDestroy, ChangeDetectorRef } from '@angular/core';\r\nimport { Promotion } from '../../../../../models/promotion';\r\nimport { Subscription, of } from 'rxjs';\r\nimport { Company } from '../../../../../models/company';\r\nimport { NavController, PopoverController, MenuController, LoadingController } from '@ionic/angular';\r\nimport { SharedService } from '../../../../services/shared.service';\r\nimport { AuthenticationService } from '../../../../services/authentication.service';\r\nimport { ActivatedRoute, ParamMap } from '@angular/router';\r\nimport { switchMap, first } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-promotion-list',\r\n  templateUrl: './promotion-list.page.html',\r\n  styleUrls: ['./promotion-list.page.scss'],\r\n})\r\nexport class PromotionListPage implements OnInit, OnDestroy {\r\n\r\n  /**\r\n   * Capta o que foi digitado pelo usuário no campo de pesquisa\r\n   */\r\n  searchString: string = \"\";\r\n\r\n  /**\r\n   * Lista de produtos ordenados\r\n   */\r\n  promotions: Promotion[]\r\n\r\n  /**\r\n   * Subscription do subscribe inicial que carrega os produtos\r\n   */\r\n  subscriptionPromotions: Subscription\r\n\r\n  /**\r\n   * Se está carregando os elementos da página.\r\n   */\r\n  loading: boolean = true;\r\n\r\n  /**\r\n   * Verifica se existem promoções\r\n   */\r\n  existsPromotions: boolean = true;\r\n\r\n  /**\r\n   * Empresa atual\r\n   */\r\n  company: Company;\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public shared: SharedService,\r\n    public authentication: AuthenticationService,\r\n    public popoverCtrl: PopoverController,\r\n    private menuCtrl: MenuController,\r\n    private ref: ChangeDetectorRef,\r\n    public loadingCtrl: LoadingController,\r\n    private route: ActivatedRoute) { }\r\n\r\n  /**\r\n   * Inicializando estruturas após entrar na página.\r\n   */\r\n  ngOnInit(): void {\r\n    this.menuCtrl.enable(true)\r\n    this.load()\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.subscriptionPromotions) {\r\n      this.subscriptionPromotions.unsubscribe()\r\n    }\r\n  }\r\n\r\n  load() {\r\n    this.existsPromotions = true\r\n    this.loading = true\r\n\r\n    this.subscriptionPromotions = this.route.paramMap\r\n      .pipe(switchMap((params: ParamMap) => {\r\n        if (params.get('company_id'))\r\n          return Company.object(params.get('company_id'))\r\n        else\r\n          return of(null)\r\n      }))\r\n      .pipe(first()).pipe(switchMap((company: Company) => {\r\n        this.company = company;\r\n\r\n        return Company.promotions.list(company.id)\r\n      }))\r\n      .subscribe((promotions: Promotion[]) => {\r\n        if (!promotions || promotions.length <= 0) this.existsPromotions = false\r\n        this.promotions = promotions;\r\n        this.loading = false\r\n        this.change()\r\n      })\r\n  }\r\n\r\n  change() {\r\n    this.ref.detectChanges()\r\n  }\r\n\r\n  /**\r\n   * Dispara evento se as teclas alt + n for pressionado\r\n   * @param event evento\r\n   */\r\n  hotkeys(event) {\r\n    if (event.keyCode == 80 && event.altKey) {\r\n      this.add();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ir para página para adicionar um nova promoção\r\n   */\r\n  add() {\r\n    this.navCtrl.navigateRoot(['promotion/edit', { company_id: this.company.id }])\r\n  }\r\n\r\n  /** \r\n   * Ir para a página ProductEditPage para editar um produto\r\n   * @param promotion produto a ser editado\r\n   */\r\n  edit(promotion: Promotion) {\r\n    this.navCtrl.navigateRoot(['promotion/edit', { company_id: this.company.id, promotion_id: promotion.id }])\r\n  }\r\n\r\n}"],"sourceRoot":""}